<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>×¡×™××•×œ×¦×™×™×ª × ×”×™×’×” â€“ ×”×¡×—×•×ª ×“×¢×ª </title>
<style>
body{
    margin:0;
    font-family:Arial;
    direction:rtl;
    overflow:hidden;
    background:black;
    color:white;
}

#player{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    z-index:-1;
}

#overlay{
    position:absolute;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.45);
}

header{
    text-align:center;
    padding:20px;
    font-size:24px;
    background:rgba(0,0,0,0.6);
}

#startScreen,#resultScreen{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:rgba(15,23,42,0.95);
    padding:40px;
    border-radius:15px;
    text-align:center;
}

button{
    padding:12px 25px;
    margin-top:15px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-size:15px;
}

#stats{
    position:absolute;
    top:90px;
    right:20px;
    background:rgba(15,23,42,0.9);
    padding:15px;
    border-radius:10px;
    display:none;
}

#eventBox{
    position:absolute;
    bottom:50%;
    left:50%;
    transform:translate(-50%,50%);
    background:rgba(255,255,255,0.95);
    padding:20px;
    border-radius:15px;
    display:none;
    text-align:center;
    width:320px;
    color:black;
    font-weight:bold;
    animation: popIn 0.5s;
}

@keyframes popIn{
    0% {transform:translate(-50%,60%) scale(0.5); opacity:0;}
    100% {transform:translate(-50%,50%) scale(1); opacity:1;}
}

.shake{
    animation: shakeAnim 0.3s;
}

@keyframes shakeAnim{
    0% {transform: translate(-50%,50%) translateX(0);}
    25% {transform: translate(-50%,50%) translateX(-5px);}
    50% {transform: translate(-50%,50%) translateX(5px);}
    75% {transform: translate(-50%,50%) translateX(-5px);}
    100% {transform: translate(-50%,50%) translateX(0);}
}
</style>
</head>
<body>

<div id="player"></div>
<div id="overlay"></div>

<header>×¡×™××•×œ×¦×™×™×ª × ×”×™×’×” â€“ ×”×¡×—×•×ª ×“×¢×ª </header>

<div id="startScreen">
    <h2>×¡×™××•×œ×¦×™×™×ª × ×”×™×’×” ×¨×©××™×ª</h2>
    <p>××©×š ×”×¡×™××•×œ×¦×™×”: 4:30 ×“×§×•×ª</p>
      <p>××’×™×©×™×: ×¢×™×œ××™ ××•×—× ×”, ×™×”×œ×™ ××—×“×•×ª, ×’×™× ××‘×™×˜×œ</p>
    <button onclick="startGame()">×”×ª×—×œ ×¡×™××•×œ×¦×™×”</button>
</div>

<div id="stats">
×¨×™×›×•×–: <span id="focus">100</span>%<br>
×–××Ÿ × ×•×ª×¨: <span id="time">04:30</span><br>
×˜×¢×•×™×•×ª: <span id="mistakes">0</span>
</div>

<div id="eventBox">
<p id="eventText"></p>
<button onclick="ignoreEvent()">×œ×”×ª×¢×œ×</button>
<button onclick="engageEvent()">×œ×”×’×™×‘</button>
<p id="funResponse" style="margin-top:10px;font-size:14px;color:blue;"></p>
</div>

<div id="resultScreen" style="display:none;"></div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
let player;
let focus = 100;
let totalTime = 270;
let mistakes = 0;
let gameInterval;
let eventInterval;
let eventActive = false;

const events = [
{txt:"ğŸ“± ×¡×™×¨×™ ××“×‘×¨×ª* ×™×•×¡×™ ××ª×§×©×¨ ×•×©×•××œ ×©××œ×•×ª ×•××ª×” ×××‘×“ ×¨×™×›×•×– â€“ ××” ×ª×¢×©×”? ×ª× ×ª×§ ××• ×œ×?! ", ignore:"×”×¦×œ×—×ª ×œ×”×ª×¢×œ×, ××‘×œ ×ª×–×›×•×¨: ×”×—×™×™× ×œ× ×¢×œ ×¡×œ×•×œ×¨×™!", engage:"××—×™, ××” ××›×¤×ª ×œ×š ××™××ª×§×©×¨ ×¢×›×©×™×•? ×”×¤×¡×§×ª ×œ× ×”×•×’ ğŸ˜‚"},
{txt:"ğŸ’¬ ×§×™×‘×œ×ª ×”×•×“×¢×” ××™×•×¡×™ ×”×•× ×©×•××œ ×× ×‘××œ×š ×œ×¨×“×ª ×œ××™×œ×ª?  â€“ ××” ×¢×•×©×”?? ×ª×‘×—×¨!", ignore:"×•×•××˜×¡××¤? ×©××¨×ª ×¢×œ ×”×¨××©, ××œ×š!", engage:"×ª×©×•×‘×” ×œ× ×˜×•×‘×”! ×¢×›×©×™×• ××™×‘×“×ª ×¨×™×›×•×– ğŸ˜"},
{txt:"ğŸµ ?××•×–×™×§×” ×—×–×§×” ×•×¦×œ×™×œ×™× ×©×œ ×¢×•××¨ ××“×  â€“ ××” ×ª×¢×©×” !", ignore:"×©×§×˜ ×¤× ×™××™, ×××© ×›××• ××“×™×˜×¦×™×” ×¢×œ ×”×›×‘×™×©", engage:"×¨×•×§ ×× ×“ ×¨×•×œ ×‘×¨××©! ×§×¦×ª ×™×•×ª×¨ ××“×™ ×—×–×§ ğŸ¤˜"},
{txt:"ğŸ‘¥ ?×™×”×œ×™ ××—×“×•×ª ×œ×™×“×š ××¨××” ×¡×¨×˜×•×Ÿ â€“ ××” ×ª×¢×©×” !", ignore:"×ª×¤×¡×ª ××ª ×¢×¦××š, ×œ× × ×›× ×¡×ª ×œ×¡×¨×˜×•×Ÿ ğŸ™", engage:"×¦×¤×™×™×” ×§×¦×¨×”, ××‘×œ ×”×™×™, ×¦×—×§×ª ×§×¦×ª ğŸ˜‚"},
{txt:"ğŸ”” ×”×ª×¨××” ××¢×¨×›×ª â€“ ×ª×‘×—×¨ × ×›×•×Ÿ!  !", ignore:"×”×ª×¢×œ××ª ××”×©×˜×•×ª ×”×–××ª, ×ª××©×™×š ×œ× ×”×•×’ ×›××• ××§×¦×•×¢×Ÿ", engage:"×”×’×‘×ª ××™×“! ×§×¦×ª ××“×™ ×—×¨×™×£ ğŸ˜…"}
];

function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
        videoId: 'o9VQZ8RFS7U',
        playerVars: {autoplay:0, controls:0, rel:0, loop:1, playlist:'o9VQZ8RFS7U', modestbranding:1}
    });
}

function formatTime(seconds){
    let m = Math.floor(seconds/60);
    let s = seconds%60;
    if(s<10) s="0"+s;
    if(m<10) m="0"+m;
    return m+":"+s;
}

function startGame(){
    document.getElementById("startScreen").style.display="none";
    document.getElementById("stats").style.display="block";
    player.playVideo();
    gameInterval = setInterval(updateTime,1000);
    eventInterval = setInterval(triggerEvent,25000); // ×¢×›×©×™×• 25 ×©× ×™×•×ª ×‘×™×Ÿ ×”×¡×—×•×ª
}

function updateStats(){
    document.getElementById("focus").innerText = focus;
    document.getElementById("time").innerText = formatTime(totalTime);
    document.getElementById("mistakes").innerText = mistakes;
}

function updateTime(){
    if(totalTime<=0){ endGame(); return; }
    totalTime--;
    updateStats();
}

function triggerEvent(){
    if(eventActive || totalTime<=0) return;
    eventActive = true;
    player.pauseVideo();
    
    let e = events[Math.floor(Math.random()*events.length)];
    let box = document.getElementById("eventBox");
    box.classList.add("shake");
    box.style.display="block";
    document.getElementById("eventText").innerText = e.txt;
    document.getElementById("funResponse").innerText = ""; // ××™×¤×•×¡ ×ª×’×•×‘×”
    box.dataset.ignore = e.ignore;
    box.dataset.engage = e.engage;
}

function ignoreEvent(){
    focus += 2;
    if(focus>100) focus=100;
    let box = document.getElementById("eventBox");
    document.getElementById("funResponse").innerText = box.dataset.ignore;
    setTimeout(closeEvent,1500); // ××¤×©×¨ ×œ×©×™× ×§×¦×ª ×“×™×œ×™×™ ×œ×”×¨××•×ª ×ª×’×•×‘×”
}

function engageEvent(){
    focus -= 15;
    mistakes++;
    let box = document.getElementById("eventBox");
    document.getElementById("funResponse").innerText = box.dataset.engage;
    setTimeout(closeEvent,1500);
}

function closeEvent(){
    eventActive=false;
    let box = document.getElementById("eventBox");
    box.style.display="none";
    box.classList.remove("shake");
    player.playVideo();
    updateStats();
}

function endGame(){
    clearInterval(gameInterval);
    clearInterval(eventInterval);
    player.pauseVideo();
    document.getElementById("eventBox").style.display="none";
    document.getElementById("resultScreen").style.display="block";

    let rating="× ×”×™×’×” ××¡×•×›× ×ª";
    if(focus>85) rating="× ×”×™×’×” ×‘×˜×•×—×” ×××•×“";
    else if(focus>60) rating="× ×”×™×’×” ×¡×‘×™×¨×”";

    document.getElementById("resultScreen").innerHTML=
    "<h2>×“×•×— × ×”×’ ××¡×›×</h2>"+
    "×¨××ª ×¨×™×›×•×– ×¡×•×¤×™×ª: "+focus+"%<br>"+
    "××¡×¤×¨ ×˜×¢×•×™×•×ª: "+mistakes+"<br>"+
    "×”×¢×¨×›×ª ×‘×˜×™×—×•×ª: "+rating;
}

updateStats();
</script>

</body>
</html>
